<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ECE297 Storage Server: server.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>server.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>This file implements the storage server.  
<a href="#_details">More...</a></p>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;arpa/inet.h&gt;</code><br/>
<code>#include &lt;netdb.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="utils_8h_source.html">utils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="loghelp_8h_source.html">loghelp.h</a>&quot;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>

<p><a href="server_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtable.html">table</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A struct a linked list to store the table's configuration paramaters.  <a href="structtable.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtemp__table__info.html">temp_table_info</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A struct to store EACH table's paramters.  <a href="structtemp__table__info.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkey.html">key</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simply stores the next key in the list and the value (each key is a struct).  <a href="structkey.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhead.html">head</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A header for our database.  <a href="structhead.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a299a0fee5caf081ea9aa2893055d2846"></a><!-- doxytag: member="server.c::MAX_SIZE_LENGTH" ref="a299a0fee5caf081ea9aa2893055d2846" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_SIZE_LENGTH</b>&nbsp;&nbsp;&nbsp;800</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a36b090ddf192f97d9fecf8ff5a98996e"></a><!-- doxytag: member="server.c::MAX_LISTENQUEUELEN" ref="a36b090ddf192f97d9fecf8ff5a98996e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a36b090ddf192f97d9fecf8ff5a98996e">MAX_LISTENQUEUELEN</a>&nbsp;&nbsp;&nbsp;20</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum number of queued connections. <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a4317ad3e31513ec9dc87568ad6076357">create_table_bare</a> (char *name_table, struct <a class="el" href="structtable__info.html">table_info</a> *temp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that dynamically creates a bare table given its name and table configurations.  <a href="#a4317ad3e31513ec9dc87568ad6076357"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#ab69fa560e07050056e5d414d0319a333">find_table</a> (char *name, struct <a class="el" href="structhead.html">head</a> *<a class="el" href="structhead.html">head</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a function to find the table stored inside of our database  <a href="#ab69fa560e07050056e5d414d0319a333"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structkey.html">key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a92da497d3ae8d68d2c658cf17cfba669">find_key</a> (char *name, struct <a class="el" href="structtable.html">table</a> *<a class="el" href="structtable.html">table</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function to find the key stored inside of our database  <a href="#a92da497d3ae8d68d2c658cf17cfba669"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aedd4350fbec84278fe0c8762a894656f"></a><!-- doxytag: member="server.c::create_table" ref="aedd4350fbec84278fe0c8762a894656f" args="(char *name_table, char *name_key, char *value)" -->
struct <a class="el" href="structtable.html">table</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>create_table</b> (char *name_table, char *name_key, char *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structkey.html">key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#af373ef3f90dae112e95a1bd54bcd68e0">create_key</a> (char *name_key, char *value, struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *temp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that dynamically creates a key given its key name, value.  <a href="#af373ef3f90dae112e95a1bd54bcd68e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a0e90bd3341237dc35783f24455332d0d">insert_table</a> (struct <a class="el" href="structtable.html">table</a> *new_table, struct <a class="el" href="structhead.html">head</a> *<a class="el" href="structhead.html">head</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a function that inserts a table (new_table) inside of our database. Also inserts it into our structs  <a href="#a0e90bd3341237dc35783f24455332d0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#adf3e22877d9469477ea79cc2636a6681">insert_key</a> (struct <a class="el" href="structkey.html">key</a> *new_key, struct <a class="el" href="structtable.html">table</a> *<a class="el" href="structtable.html">table</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a function that inserts a key (new_key) inside of our database. Also inserts it into our structs  <a href="#adf3e22877d9469477ea79cc2636a6681"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a82b3262a5b6c238660fecf9639926f00"></a><!-- doxytag: member="server.c::delete_table" ref="a82b3262a5b6c238660fecf9639926f00" args="(struct table *target_table, struct table *table)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>delete_table</b> (struct <a class="el" href="structtable.html">table</a> *target_table, struct <a class="el" href="structtable.html">table</a> *<a class="el" href="structtable.html">table</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a0a41677fd4a6a24904ecc2c1cd35e8de">delete_key</a> (struct <a class="el" href="structkey.html">key</a> *target_key, struct <a class="el" href="structtable.html">table</a> *<a class="el" href="structtable.html">table</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function that deletes the key from the linked list and sets the next/back value of respective keys in the list  <a href="#a0a41677fd4a6a24904ecc2c1cd35e8de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a898b393577689d52466851cde228dd68">set_function</a> (char *table_name, char *key_name,char *value, struct <a class="el" href="structhead.html">head</a> *<a class="el" href="structhead.html">head</a>, struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *temp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a function that sets the value of a key based on the value sent. Function is called from handle_command  <a href="#a898b393577689d52466851cde228dd68"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a3915701f4fbc36c0bf379a4a727c08c4">get_function</a> (char *table_name, char *key_name, char *value, struct <a class="el" href="structhead.html">head</a> *<a class="el" href="structhead.html">head</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a function to get (retreive a value) from our database. Function is called from handle_command  <a href="#a3915701f4fbc36c0bf379a4a727c08c4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a384f4e65d1f833a831812e14e2b4933b">compare_formats</a> (struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *temp_info, struct <a class="el" href="structtable.html">table</a> *target_table)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PARSING///.  <a href="#a384f4e65d1f833a831812e14e2b4933b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a0daff952695c2574607788aef2523f12">query_parser</a> (char *line, struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *temp_info)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a function that parses the query predicates. Function called from handle command  <a href="#a0daff952695c2574607788aef2523f12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a640cfbcd378b423928975ed2139b36f0">input_parser</a> (char *line, struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *temp_info)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">parses the user's input for a set command and saves it's format in temp_info  <a href="#a640cfbcd378b423928975ed2139b36f0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#ad375ae8a63d39515d46274ea648a6870">compare_query_format</a> (struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *temp_info, struct <a class="el" href="structtable.html">table</a> *target_table)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function that compares if the format of the input (for storage_query) matches the columns/types of the table's format  <a href="#ad375ae8a63d39515d46274ea648a6870"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structkey.html">key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#ab15adf456c1e9f4bf4c23e176a7fe6aa">check_key</a> (struct <a class="el" href="structkey.html">key</a> *target_key, int index_col, char *operators, char *type, char *value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a function that checks if the key's value satisfies the condition outlined by the operator  <a href="#ab15adf456c1e9f4bf4c23e176a7fe6aa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3bcbea3662833fd6964608845b836958"></a><!-- doxytag: member="server.c::table_query" ref="a3bcbea3662833fd6964608845b836958" args="(struct table *target_table, struct temp_table_info *col_info, struct key *key_array[50])" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>table_query</b> (struct <a class="el" href="structtable.html">table</a> *target_table, struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *col_info, struct <a class="el" href="structkey.html">key</a> *key_array[50])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a2c9007ff1f3225a87ebd7723764dd350">handle_command</a> (int sock, char *cmd, FILE **log, struct <a class="el" href="structconfig__params.html">config_params</a> *params, struct <a class="el" href="structhead.html">head</a> *<a class="el" href="structhead.html">head</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle command takes in a sentence from the client and performs accordingly.  <a href="#a2c9007ff1f3225a87ebd7723764dd350"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the storage server.  <a href="#a0ddf1224851353fc92bfbff6f499fa97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8c.html#a0515605428d1e5c85dc60d3ebb20b3c1">table_query</a> (struct <a class="el" href="structtable.html">table</a> *target_table, struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *col_info, struct <a class="el" href="structkey.html">key</a> *key_array[])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">takes a set of conditions (col_info) and finds all the keys in the supplied table that match all the conditions  <a href="#a0515605428d1e5c85dc60d3ebb20b3c1"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ce736b5d74d8a2a656fee96d7bd0735"></a><!-- doxytag: member="server.c::didAuthenticate" ref="a5ce736b5d74d8a2a656fee96d7bd0735" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>didAuthenticate</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This file implements the storage server. </p>
<p>The storage server should be named "server" and should take a single command line argument that refers to the configuration file.</p>
<p>The storage server should be able to communicate with the client library functions declared in <a class="el" href="storage_8h.html" title="This file defines the interface between the storage client and server.">storage.h</a> and implemented in <a class="el" href="storage_8c.html" title="This file contains the implementation of the storage server interface as specified in storage...">storage.c</a>.</p>
<p>At the bottom of the server file, we have implemented all of the functions needed for our database, along with the query function </p>

<p>Definition in file <a class="el" href="server_8c_source.html">server.c</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab15adf456c1e9f4bf4c23e176a7fe6aa"></a><!-- doxytag: member="server.c::check_key" ref="ab15adf456c1e9f4bf4c23e176a7fe6aa" args="(struct key *target_key, int index_col, char *operators, char *type, char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structkey.html">key</a> * check_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkey.html">key</a> *&nbsp;</td>
          <td class="paramname"> <em>target_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>operators</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a function that checks if the key's value satisfies the condition outlined by the operator </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>target_key</em>&nbsp;</td><td>is the key checked </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index_col</em>&nbsp;</td><td>holds the correct index for the key's column/value to match the provided value's type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>operators</em>&nbsp;</td><td>condition to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns the key struct if valid, null if not </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l01217">1217</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l01250">table_query()</a>.</p>

</div>
</div>
<a class="anchor" id="a384f4e65d1f833a831812e14e2b4933b"></a><!-- doxytag: member="server.c::compare_formats" ref="a384f4e65d1f833a831812e14e2b4933b" args="(struct temp_table_info *temp_info, struct table *target_table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compare_formats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>temp_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td>
          <td class="paramname"> <em>target_table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PARSING///. </p>
<p>function that compares the formats of the user's input with the expected format in the table (used for storage_set)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>temp_info</em>&nbsp;</td><td>contains the format of the columns/types/values of the user input </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>target_table</em>&nbsp;</td><td>contains the format of the table, this is compared with the temp provided in temp_info </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns -1 for failure, and 0 for success </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l01008">1008</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00860">set_function()</a>.</p>

</div>
</div>
<a class="anchor" id="ad375ae8a63d39515d46274ea648a6870"></a><!-- doxytag: member="server.c::compare_query_format" ref="ad375ae8a63d39515d46274ea648a6870" args="(struct temp_table_info *temp_info, struct table *target_table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compare_query_format </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>temp_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td>
          <td class="paramname"> <em>target_table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function that compares if the format of the input (for storage_query) matches the columns/types of the table's format </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>temp_info</em>&nbsp;</td><td>a pointer to a struct that contains the format of the input sent </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>target_table</em>&nbsp;</td><td>contains the format of the table, this is compared with the temp provided in temp_info </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns -1 for failure, and 0 for success </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00964">964</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00124">handle_command()</a>.</p>

</div>
</div>
<a class="anchor" id="af373ef3f90dae112e95a1bd54bcd68e0"></a><!-- doxytag: member="server.c::create_key" ref="af373ef3f90dae112e95a1bd54bcd68e0" args="(char *name_key, char *value, struct temp_table_info *temp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structkey.html">key</a> * create_key </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>temp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A function that dynamically creates a key given its key name, value. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name_key</em>&nbsp;</td><td>name of the key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>value to place inside the key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>temp</em>&nbsp;</td><td>struct of the table info </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>struct to the key created </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00691">691</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00860">set_function()</a>.</p>

</div>
</div>
<a class="anchor" id="a4317ad3e31513ec9dc87568ad6076357"></a><!-- doxytag: member="server.c::create_table_bare" ref="a4317ad3e31513ec9dc87568ad6076357" args="(char *name_table, struct table_info *temp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtable.html">table</a> * create_table_bare </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtable__info.html">table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>temp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A function that dynamically creates a bare table given its name and table configurations. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name_table</em>&nbsp;</td><td>name of the table </td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="structtable__info.html" title="A struct to store each table&#39;s configuration type.">table_info</a></em>&nbsp;</td><td>information for each table inside the config file </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>struct to the table created </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00657">657</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00406">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a41677fd4a6a24904ecc2c1cd35e8de"></a><!-- doxytag: member="server.c::delete_key" ref="a0a41677fd4a6a24904ecc2c1cd35e8de" args="(struct key *target_key, struct table *table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkey.html">key</a> *&nbsp;</td>
          <td class="paramname"> <em>target_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function that deletes the key from the linked list and sets the next/back value of respective keys in the list </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>target_key</em>&nbsp;</td><td>is the key to be deleted </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>table</em>&nbsp;</td><td>is the table the key is contained in </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00818">818</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00860">set_function()</a>.</p>

</div>
</div>
<a class="anchor" id="a92da497d3ae8d68d2c658cf17cfba669"></a><!-- doxytag: member="server.c::find_key" ref="a92da497d3ae8d68d2c658cf17cfba669" args="(char *name, struct table *table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structkey.html">key</a> * find_key </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>function to find the key stored inside of our database </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>of the table </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>structure of the head to the database </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>struct of the table if found, or null if not found </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00609">609</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00927">get_function()</a>, and <a class="el" href="server_8c_source.html#l00860">set_function()</a>.</p>

</div>
</div>
<a class="anchor" id="ab69fa560e07050056e5d414d0319a333"></a><!-- doxytag: member="server.c::find_table" ref="ab69fa560e07050056e5d414d0319a333" args="(char *name, struct head *head)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtable.html">table</a> * find_table </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhead.html">head</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a function to find the table stored inside of our database </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>of the table </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>structure of the head to the database </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>struct of the table if found, or null if not found </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00588">588</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00927">get_function()</a>, <a class="el" href="server_8c_source.html#l00124">handle_command()</a>, and <a class="el" href="server_8c_source.html#l00860">set_function()</a>.</p>

</div>
</div>
<a class="anchor" id="a3915701f4fbc36c0bf379a4a727c08c4"></a><!-- doxytag: member="server.c::get_function" ref="a3915701f4fbc36c0bf379a4a727c08c4" args="(char *table_name, char *key_name, char *value, struct head *head)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_function </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>table_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhead.html">head</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a function to get (retreive a value) from our database. Function is called from handle_command </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>table_name</em>&nbsp;</td><td>name of the table we must get from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_name</em>&nbsp;</td><td>name of the key to retreive from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>returns the value inside </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>header to the database </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 for success, 1 for key not found, 2 table not found </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00927">927</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>References <a class="el" href="server_8c_source.html#l00609">find_key()</a>, and <a class="el" href="server_8c_source.html#l00588">find_table()</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00124">handle_command()</a>.</p>

</div>
</div>
<a class="anchor" id="a2c9007ff1f3225a87ebd7723764dd350"></a><!-- doxytag: member="server.c::handle_command" ref="a2c9007ff1f3225a87ebd7723764dd350" args="(int sock, char *cmd, FILE **log, struct config_params *params, struct head *head)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int handle_command </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE **&nbsp;</td>
          <td class="paramname"> <em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig__params.html">config_params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhead.html">head</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle command takes in a sentence from the client and performs accordingly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sock</em>&nbsp;</td><td>The socket connected to the client. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cmd</em>&nbsp;</td><td>The command received from the client. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>a pointer to the pointer of the declaration of the file to log </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>a pointer to the struct holding the properties inside the config file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>a pointer to the head of our database </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, -1 otherwise. </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00124">124</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>References <a class="el" href="server_8c_source.html#l00964">compare_query_format()</a>, <a class="el" href="server_8c_source.html#l00588">find_table()</a>, <a class="el" href="server_8c_source.html#l00927">get_function()</a>, <a class="el" href="server_8c_source.html#l01155">input_parser()</a>, <a class="el" href="utils_8c_source.html#l00280">logger()</a>, <a class="el" href="storage_8h_source.html#l00036">MAX_VALUE_LEN</a>, <a class="el" href="utils_8h_source.html#l00073">config_params::password</a>, <a class="el" href="server_8c_source.html#l01053">query_parser()</a>, <a class="el" href="utils_8c_source.html#l00019">sendall()</a>, <a class="el" href="server_8c_source.html#l00860">set_function()</a>, <a class="el" href="server_8c_source.html#l01250">table_query()</a>, and <a class="el" href="utils_8h_source.html#l00070">config_params::username</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00406">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a640cfbcd378b423928975ed2139b36f0"></a><!-- doxytag: member="server.c::input_parser" ref="a640cfbcd378b423928975ed2139b36f0" args="(char *line, struct temp_table_info *temp_info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int input_parser </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>temp_info</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>parses the user's input for a set command and saves it's format in temp_info </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>line</em>&nbsp;</td><td>to parse </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>temp_info</em>&nbsp;</td><td>contains the saved info and format </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns -1 for failure, and 0 for success </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l01155">1155</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00124">handle_command()</a>.</p>

</div>
</div>
<a class="anchor" id="adf3e22877d9469477ea79cc2636a6681"></a><!-- doxytag: member="server.c::insert_key" ref="adf3e22877d9469477ea79cc2636a6681" args="(struct key *new_key, struct table *table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structkey.html">key</a> *&nbsp;</td>
          <td class="paramname"> <em>new_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a function that inserts a key (new_key) inside of our database. Also inserts it into our structs </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>new_key</em>&nbsp;</td><td>a struct to the new key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>table</em>&nbsp;</td><td>a struct to the table </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00750">750</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00860">set_function()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e90bd3341237dc35783f24455332d0d"></a><!-- doxytag: member="server.c::insert_table" ref="a0e90bd3341237dc35783f24455332d0d" args="(struct table *new_table, struct head *head)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert_table </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td>
          <td class="paramname"> <em>new_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhead.html">head</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a function that inserts a table (new_table) inside of our database. Also inserts it into our structs </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>new_table</em>&nbsp;</td><td>a struct pointing to the table </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>a struct pointing to the head of our database </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00719">719</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00406">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a><!-- doxytag: member="server.c::main" ref="a0ddf1224851353fc92bfbff6f499fa97" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start the storage server. </p>
<ul>
<li>starts the connection and ports</li>
</ul>
<ul>
<li>it opens the file to log, processes the time output</li>
<li>creates the tables and keys for the database</li>
<li>processes the config file</li>
<li>calls handle command <dl class="return"><dt><b>Returns:</b></dt><dd>returns 0 for success, -1 for failure </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="server_8c_source.html#l00406">406</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>References <a class="el" href="server_8c_source.html#l00657">create_table_bare()</a>, <a class="el" href="server_8c_source.html#l00124">handle_command()</a>, <a class="el" href="server_8c_source.html#l00719">insert_table()</a>, <a class="el" href="utils_8c_source.html#l00280">logger()</a>, <a class="el" href="utils_8h_source.html#l00022">MAX_CMD_LEN</a>, <a class="el" href="server_8c_source.html#l00083">MAX_LISTENQUEUELEN</a>, <a class="el" href="utils_8c_source.html#l00234">read_config()</a>, <a class="el" href="utils_8c_source.html#l00039">recvline()</a>, <a class="el" href="utils_8h_source.html#l00064">config_params::server_host</a>, and <a class="el" href="utils_8h_source.html#l00067">config_params::server_port</a>.</p>

</div>
</div>
<a class="anchor" id="a0daff952695c2574607788aef2523f12"></a><!-- doxytag: member="server.c::query_parser" ref="a0daff952695c2574607788aef2523f12" args="(char *line, struct temp_table_info *temp_info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int query_parser </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>temp_info</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a function that parses the query predicates. Function called from handle command </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>line</em>&nbsp;</td><td>to parse </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>temp_info</em>&nbsp;</td><td>stores the parsed information and format </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns -1 for failure, and 0 for success </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l01053">1053</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00124">handle_command()</a>.</p>

</div>
</div>
<a class="anchor" id="a898b393577689d52466851cde228dd68"></a><!-- doxytag: member="server.c::set_function" ref="a898b393577689d52466851cde228dd68" args="(char *table_name, char *key_name,char *value, struct head *head, struct temp_table_info *temp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_function </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>table_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structhead.html">head</a> *&nbsp;</td>
          <td class="paramname"> <em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>temp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a function that sets the value of a key based on the value sent. Function is called from handle_command </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>table_name</em>&nbsp;</td><td>name of the table we must set into </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_name</em>&nbsp;</td><td>name of the key to input </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>value to be set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head</em>&nbsp;</td><td>header to the database (head of table chain) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>temp</em>&nbsp;</td><td>a struct that contains the format of the input, used to check if the format matches the table's format </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 for success, 1 for key not found, 2 table not found, 3 unknown, 4 invalid format of input (types do no match columns) </dd></dl>

<p>Definition at line <a class="el" href="server_8c_source.html#l00860">860</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>References <a class="el" href="server_8c_source.html#l01008">compare_formats()</a>, <a class="el" href="server_8c_source.html#l00691">create_key()</a>, <a class="el" href="server_8c_source.html#l00818">delete_key()</a>, <a class="el" href="server_8c_source.html#l00609">find_key()</a>, <a class="el" href="server_8c_source.html#l00588">find_table()</a>, <a class="el" href="server_8c_source.html#l00750">insert_key()</a>, and <a class="el" href="storage_8h_source.html#l00027">MAX_RECORDS_PER_TABLE</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00124">handle_command()</a>.</p>

</div>
</div>
<a class="anchor" id="a0515605428d1e5c85dc60d3ebb20b3c1"></a><!-- doxytag: member="server.c::table_query" ref="a0515605428d1e5c85dc60d3ebb20b3c1" args="(struct table *target_table, struct temp_table_info *col_info, struct key *key_array[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int table_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtable.html">table</a> *&nbsp;</td>
          <td class="paramname"> <em>target_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtemp__table__info.html">temp_table_info</a> *&nbsp;</td>
          <td class="paramname"> <em>col_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structkey.html">key</a> *&nbsp;</td>
          <td class="paramname"> <em>key_array</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>takes a set of conditions (col_info) and finds all the keys in the supplied table that match all the conditions </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>target_table</em>&nbsp;</td><td>a struct to the configuartion of that particular table </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>col_info</em>&nbsp;</td><td>holds the parsed conditions (from query_parser) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key_array</em>&nbsp;</td><td>holds the keys that satisfy all the conditions </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns -1 for failure, and 0 for success </dd></dl>

<p><p>filled Arr_Keys with the keys that satisfied at least one of the conditions now checking which keys match all conditions </p>
</p>

<p>Definition at line <a class="el" href="server_8c_source.html#l01250">1250</a> of file <a class="el" href="server_8c_source.html">server.c</a>.</p>

<p>References <a class="el" href="server_8c_source.html#l01217">check_key()</a>.</p>

<p>Referenced by <a class="el" href="server_8c_source.html#l00124">handle_command()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Mar 28 2013 12:40:54 for ECE297 Storage Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
